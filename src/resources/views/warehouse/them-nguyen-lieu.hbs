{{> header}}

<script>
    let nameList = []
</script>

{{#each warehouses}}
    <script>
        nameList.push({name: '{{this.name}}'})
    </script>      
{{/each}}

<div class="container">
    <h4 class="" style="text-align: center; margin-top: -35px;">THÊM NGUYÊN LIỆU MỚI</h4>
    <form method="POST" action="/warehouse/postthemnguyenlieu" >
        <div class="mb-3">
            <label for="name" class="form-label">Tên nguyên liệu</label>
            <input type="text" class="form-control" id="name" name="name" placeholder="Tên nguyên liệu">
        </div>
        
        <div class="mb-3">
            <label for="number" class="form-label">Ngưỡng cảnh báo hết hàng</label>
            <input type="number" class="form-control" id="number" name="number" value="0" placeholder="Số lượng">
        </div>

        <div class="mb-3">
            <label for="donvi" class="form-label">Đơn vị</label>
            <input type="text" class="form-control" id="donvi" name="donvi" placeholder="Đơn vị">
        </div>

        <button type="submit" class="btn btn-primary mb-5">Submit</button>
    </form>
</div>

<button data-toggle="modal" data-target="#exampleModalCenter" id="deletebutton" hidden class="buttonhidden">abc</button>

<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Thông báo</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                Tên đã tồn tại. Vui lòng nhập tên khác
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
            </div>
        </div>
    </div>

<script>
    let namecheck = document.getElementById('name')
    let deletebutton = document.getElementById('deletebutton')
    let a
    namecheck.addEventListener('change', () => {
        a = 0
        for(let k = 0 ; k < nameList.length ; k++){
            if(namecheck.value === nameList[k].name){
                a += 1
            }
        }
        if(a === 1){
            deletebutton.click()
            namecheck.value = ''
        }
    })
</script>

